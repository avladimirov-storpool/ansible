---
- name: Check if booting via EFI (CentOS/RHEL)
  stat:
    path: /boot/efi/EFI/centos/grub.cfg
  register: sp_centos_efi
  tags: ['install', 'install-post_install'] # Check if booting via EFI (CentOS/RHEL)

- name: Update GRUB (CentOS/RHEL)
  shell: "/usr/sbin/grub2-mkconfig -o {{ '/boot/efi/EFI/centos/grub.cfg' if sp_centos_efi.stat.exists else '$(readlink -f /etc/grub2.cfg)' }}"
  changed_when: false
  tags: ['install', 'install-post_install'] # Update GRUB (CentOS/RHEL)
